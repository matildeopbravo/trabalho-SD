package sd.client;import sd.Operation;import sd.server.Reply;import java.io.DataInputStream;import java.io.DataOutputStream;import java.io.IOException;import java.net.Socket;import java.time.LocalDate;import java.util.List;public class Client {    private ClientUser user ;    private DataOutputStream out;    private DataInputStream in;    public Client (String address, int port) throws IOException {            this.user = null;            Socket socket = new Socket(address, port);            out = new DataOutputStream(socket.getOutputStream());            in = new DataInputStream(socket.getInputStream());    }    public void setUser(String username, String password) {        user = new ClientUser(username,password);    }    public void handleReply(DataInputStream in) throws IOException {        Reply rep = Reply.deserialize(in);        System.out.println(rep.toString());        if(rep.equals(Reply.Codigo))            System.out.println(in.readUTF());    }    public void registaUser() throws IOException {        Operation.Autenticar.serialize(out);        user.serialize(out);    }    public void autenticaUser() throws IOException {        Operation.Registar.serialize(out);        user.serialize(out);    }    public void efetuaReserva(List<String> cidades, LocalDate dataInicial, LocalDate dataFinal) throws IOException {        Operation.Reserva.serialize(out);        out.writeInt(cidades.size());        for(String c : cidades) {            out.writeUTF(c);        }        out.writeUTF(dataInicial.toString());        out.writeUTF(dataFinal.toString());    }    public void cancelaReserva(String idReserva) throws IOException {        Operation.CancelaReserva.serialize(out);        out.writeUTF(idReserva);    }    public void pedeListaVoos() throws IOException {        Operation.ListaVoos.serialize(out);    }    private boolean isSucessful(DataInputStream in) throws IOException {        Reply r = Reply.values()[in.readInt()];        return r.equals(Reply.Success);    }}